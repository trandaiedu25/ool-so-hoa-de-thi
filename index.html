<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Thi Tr·ª±c Tuy·∫øn</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; margin: 0; padding: 0; }
        
        /* CSS cho m√†n h√¨nh ƒêƒÉng nh·∫≠p */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .login-box {
            background: white; padding: 40px; border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); width: 90%; max-width: 400px; text-align: center;
        }
        .login-box h2 { margin-top: 0; color: #333; }
        .login-input {
            width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd;
            border-radius: 5px; box-sizing: border-box; font-size: 16px;
        }
        .btn-start {
            width: 100%; padding: 12px; background-color: #764ba2; color: white;
            border: none; border-radius: 5px; font-size: 16px; cursor: pointer; font-weight: bold;
            transition: background 0.3s;
        }
        .btn-start:hover { background-color: #5a3780; }

        /* CSS cho b√†i thi */
        .container { max-width: 800px; margin: 20px auto; padding: 20px; display: none; } /* M·∫∑c ƒë·ªãnh ·∫©n */
        .header-info {
            background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .question-block {
            background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: relative;
        }
        .q-image {
            max-width: 100%; height: auto; display: block; margin: 10px auto;
            border: 1px solid #eee; border-radius: 4px;
        }
        .options-list { list-style: none; padding: 0; }
        .options-list li { margin: 10px 0; padding: 10px; border: 1px solid #eee; border-radius: 5px; cursor: pointer; transition: 0.2s; }
        .options-list li:hover { background-color: #f9f9f9; }
        .options-list li label { cursor: pointer; display: flex; align-items: center; width: 100%; }
        
        .feedback { margin-top: 15px; padding: 10px; border-radius: 5px; display: none; }
        .correct-bg { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .wrong-bg { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        .btn-submit {
            background-color: #28a745; color: white; border: none; padding: 15px 30px;
            font-size: 18px; border-radius: 5px; cursor: pointer; display: block; width: 100%;
        }
        .btn-submit:hover { background-color: #218838; }

    </style>
    <script>
    MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>

<div id="login-screen">
    <div class="login-box">
        <h2>üöÄ V√†o Thi To√°n</h2>
        <p style="color: #666; margin-bottom: 20px;">Vui l√≤ng nh·∫≠p th√¥ng tin ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
        <input type="text" id="student-name" class="login-input" placeholder="H·ªç v√† t√™n c·ªßa b·∫°n" required>
        <input type="text" id="student-class" class="login-input" placeholder="L·ªõp (V√≠ d·ª•: 10A1)" required>
        <button class="btn-start" onclick="startExam()">B·∫ÆT ƒê·∫¶U L√ÄM B√ÄI</button>
    </div>
</div>

<div class="container" id="exam-interface">
    <div class="header-info">
        <div>
            <h3 style="margin: 0;">ƒê·ªÅ √în T·∫≠p To√°n 10</h3>
            <span id="display-name" style="color: #666;">H·ªçc sinh: ...</span>
        </div>
        <div style="text-align: right;">
            <div style="font-size: 0.9em; color: #888;">Th·ªùi gian</div>
            <strong style="font-size: 1.2em;">45:00</strong>
        </div>
    </div>

    <div id="quiz-content">Loading...</div>
    
    <button class="btn-submit" onclick="checkAnswers()">N·ªòP B√ÄI & XEM ƒêI·ªÇM</button>
    <div id="final-result" style="text-align: center; margin-top: 20px; font-size: 1.5em; font-weight: bold; color: #d9534f;"></div>
</div>

<script>
    let studentInfo = {};

    // D·ªØ li·ªáu JSON m·∫´u (ƒê√£ th√™m tr∆∞·ªùng 'image')
    const quizData = {
      "part_1": {
        "questions": [
          {
            "id": "C√¢u 1",
            "question": "Bi·ªÉu th·ª©c n√†o sau ƒë√¢y l√† tam th·ª©c b·∫≠c hai?",
            "options": { "A": "$3x^2+2x-5$", "B": "$2x-5$", "C": "$3x^2+2x-1$", "D": "$x^3-x^2+1$" },
            "answer": "A",
            "explanation": "D·ª±a v√†o ƒë·ªãnh nghƒ©a tam th·ª©c b·∫≠c hai."
          },
          {
            "id": "C√¢u 2",
            "question": "Cho h√¨nh ch√≥p tam gi√°c ƒë·ªÅu (nh∆∞ h√¨nh b√™n). G√≥c gi·ªØa c·∫°nh b√™n v√† m·∫∑t ƒë√°y l√†?",
            "image": "https://i.ibb.co/wzXVxHK/hinh-chop-mau.png", // V√≠ d·ª• link ·∫£nh
            "options": { "A": "$30^\\circ$", "B": "$45^\\circ$", "C": "$60^\\circ$", "D": "$90^\\circ$" },
            "answer": "C",
            "explanation": "X√°c ƒë·ªãnh h√¨nh chi·∫øu c·ªßa ƒë·ªânh xu·ªëng t√¢m ƒë√°y..."
          }
        ]
      }
    };

    // H√†m B·∫Øt ƒë·∫ßu thi
    function startExam() {
        const name = document.getElementById('student-name').value.trim();
        const className = document.getElementById('student-class').value.trim();

        if (!name || !className) {
            alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß H·ªç t√™n v√† L·ªõp!");
            return;
        }

        studentInfo = { name, className };
        document.getElementById('display-name').innerText = `H·ªçc sinh: ${name} - ${className}`;
        
        // ·∫®n login, hi·ªán b√†i thi
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('exam-interface').style.display = 'block';
        
        renderQuiz();
    }

    // H√†m render b√†i thi (C√≥ x·ª≠ l√Ω ·∫£nh)
    function renderQuiz() {
        const container = document.getElementById('quiz-content');
        let htmlContent = '';
        
        quizData.part_1.questions.forEach((q, index) => {
            // Ki·ªÉm tra xem c√≥ ·∫£nh kh√¥ng, n·∫øu c√≥ th√¨ t·∫°o th·∫ª img
            const imageHTML = q.image ? `<img src="${q.image}" class="q-image" alt="H√¨nh minh h·ªça">` : '';

            htmlContent += `
                <div class="question-block" id="q-block-${index}">
                    <div class="question-text">
                        <strong>${q.id}:</strong> ${q.question}
                    </div>
                    ${imageHTML} <ul class="options-list">
                        ${Object.entries(q.options).map(([key, value]) => `
                            <li>
                                <label>
                                    <input type="radio" name="question-${index}" value="${key}">
                                    <span style="margin-left: 10px;"><b>${key}.</b> ${value}</span>
                                </label>
                            </li>
                        `).join('')}
                    </ul>
                    <div class="feedback" id="feedback-${index}"></div>
                </div>
            `;
        });
        
        container.innerHTML = htmlContent;
        MathJax.typeset();
    }

    // H√†m ch·∫•m ƒëi·ªÉm
    function checkAnswers() {
        if(!confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën n·ªôp b√†i kh√¥ng?")) return;

        let score = 0;
        const total = quizData.part_1.questions.length;

        quizData.part_1.questions.forEach((q, index) => {
            const selected = document.querySelector(`input[name="question-${index}"]:checked`);
            const feedbackDiv = document.getElementById(`feedback-${index}`);
            
            feedbackDiv.style.display = 'block';

            if (selected && selected.value === q.answer) {
                score++;
                feedbackDiv.innerHTML = `‚úÖ <b>Ch√≠nh x√°c!</b><br>${q.explanation}`;
                feedbackDiv.className = "feedback correct-bg";
            } else {
                feedbackDiv.innerHTML = `‚ùå <b>Sai r·ªìi.</b> ƒê√°p √°n ƒë√∫ng l√†: ${q.answer}<br><i>Gi·∫£i th√≠ch: ${q.explanation}</i>`;
                feedbackDiv.className = "feedback wrong-bg";
            }
        });

        // Cu·ªôn xu·ªëng d∆∞·ªõi c√πng xem ƒëi·ªÉm
        const resultDiv = document.getElementById('final-result');
        resultDiv.innerHTML = `H·ªçc sinh: ${studentInfo.name} (${studentInfo.className})<br>ƒêi·ªÉm s·ªë: ${score}/${total}`;
        resultDiv.scrollIntoView({ behavior: 'smooth' });
        
        // Disable n√∫t n·ªôp b√†i
        document.querySelector('.btn-submit').disabled = true;
        document.querySelector('.btn-submit').innerText = "ƒê√É N·ªòP B√ÄI";
    }
</script>

</body>
</html>
